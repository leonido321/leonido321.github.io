{% extends 'gamification/base.html' %}
{% block title %}–ó–∞–¥–∞–Ω–∏—è{% endblock %}
{% block content %}
    <h2>üéØ –ó–∞–¥–∞–Ω–∏—è</h2>
    
    {% if messages %}
    <div style="margin-bottom: 20px;">
        {% for message in messages %}
        <div style="padding: 10px; background: {% if message.tags == 'error' %}#ffcdd2{% else %}#c8e6c9{% endif %}; border-radius: 8px;">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% if tasks %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
        {% for task in tasks %}
        <div class="card">
            <h3>{{ task.title }}</h3>
            <p>{{ task.description }}</p>
            <p><strong>–ù–∞–≥—Ä–∞–¥–∞:</strong> {{ task.stars_reward }} ‚≠ê</p>
            <p><strong>–¢–∏–ø:</strong> 
                {% if task.task_type == 'daily' %}–ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ
                {% elif task.task_type == 'weekly' %}–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ
                {% else %}–†–∞–∑–æ–≤–æ–µ{% endif %}
            </p>
            
            <form method="post" action="{% url 'gamification:complete_task' task.id %}">
                {% csrf_token %}
                <button type="submit" style="background: #6a1b9a; color: white; border: none; padding: 8px 15px; border-radius: 6px; width: 100%;">
                    –í—ã–ø–æ–ª–Ω–∏—Ç—å
                </button>
            </form>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card" style="text-align: center; padding: 30px;">
        <p>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π.</p>
        <img src="https://img.icons8.com/ios/100/000000/task--v1.png" alt="üéØ" style="width: 80px; opacity: 0.3;">
    </div>
    {% endif %}
{% endblock %}